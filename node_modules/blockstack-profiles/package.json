{
  "_args": [
    [
      {
        "raw": "blockstack-profiles@git://github.com/subramanianv/blockstack-profiles-js.git",
        "scope": null,
        "escapedName": "blockstack-profiles",
        "name": "blockstack-profiles",
        "rawSpec": "git://github.com/subramanianv/blockstack-profiles-js.git",
        "spec": "git://github.com/subramanianv/blockstack-profiles-js.git",
        "type": "hosted",
        "hosted": {
          "type": "github",
          "ssh": "git@github.com:subramanianv/blockstack-profiles-js.git",
          "sshUrl": "git+ssh://git@github.com/subramanianv/blockstack-profiles-js.git",
          "httpsUrl": "git+https://github.com/subramanianv/blockstack-profiles-js.git",
          "gitUrl": "git://github.com/subramanianv/blockstack-profiles-js.git",
          "shortcut": "github:subramanianv/blockstack-profiles-js",
          "directUrl": "https://raw.githubusercontent.com/subramanianv/blockstack-profiles-js/master/package.json"
        }
      },
      "/Users/Subbu/Desktop/blockchainfutures/node_modules/uport-persona"
    ]
  ],
  "_from": "git://github.com/subramanianv/blockstack-profiles-js.git",
  "_id": "blockstack-profiles@0.3.5",
  "_inCache": true,
  "_location": "/blockstack-profiles",
  "_phantomChildren": {},
  "_requested": {
    "raw": "blockstack-profiles@git://github.com/subramanianv/blockstack-profiles-js.git",
    "scope": null,
    "escapedName": "blockstack-profiles",
    "name": "blockstack-profiles",
    "rawSpec": "git://github.com/subramanianv/blockstack-profiles-js.git",
    "spec": "git://github.com/subramanianv/blockstack-profiles-js.git",
    "type": "hosted",
    "hosted": {
      "type": "github",
      "ssh": "git@github.com:subramanianv/blockstack-profiles-js.git",
      "sshUrl": "git+ssh://git@github.com/subramanianv/blockstack-profiles-js.git",
      "httpsUrl": "git+https://github.com/subramanianv/blockstack-profiles-js.git",
      "gitUrl": "git://github.com/subramanianv/blockstack-profiles-js.git",
      "shortcut": "github:subramanianv/blockstack-profiles-js",
      "directUrl": "https://raw.githubusercontent.com/subramanianv/blockstack-profiles-js/master/package.json"
    }
  },
  "_requiredBy": [
    "/uport-persona"
  ],
  "_resolved": "git://github.com/subramanianv/blockstack-profiles-js.git#87097694fa80fe7c4b812f2b65032af0ab8fb38b",
  "_shasum": "4b68d735588ab42738ed97560a007f15a9a35348",
  "_shrinkwrap": null,
  "_spec": "blockstack-profiles@git://github.com/subramanianv/blockstack-profiles-js.git",
  "_where": "/Users/Subbu/Desktop/blockchainfutures/node_modules/uport-persona",
  "author": {
    "name": "Halfmoon Labs, Inc."
  },
  "dependencies": {
    "bigi": "^1.4.1",
    "bitcoinjs-lib": "2.3.0",
    "blockstack-keychains": "0.0.4",
    "blockstack-zones": "0.0.1",
    "dateformat": "^1.0.12",
    "ecurve": "1.0.4",
    "elliptic-curve": "^0.1.0",
    "hasprop": "0.0.4",
    "jwt-js": "^0.5.0",
    "schema-inspector": "^1.6.4"
  },
  "description": "A JSON profile system where objects are cryptographically signed and reference one-another",
  "devDependencies": {
    "babel-cli": "^6.4.5",
    "babel-preset-es2015": "^6.3.13",
    "tape": "^4.4.0"
  },
  "gitHead": "87097694fa80fe7c4b812f2b65032af0ab8fb38b",
  "license": "MIT",
  "main": "lib/index",
  "name": "blockstack-profiles",
  "optionalDependencies": {},
  "readme": "# Blockstack Profiles\n\n[![CircleCI](https://img.shields.io/circleci/project/blockstack/blockstack-profiles-js/master.svg)](https://circleci.com/gh/blockstack/blockstack-profiles-js/tree/master)\n[![npm](https://img.shields.io/npm/l/blockstack-profiles.svg)](https://www.npmjs.com/package/blockstack-profiles)\n[![npm](https://img.shields.io/npm/v/blockstack-profiles.svg)](https://www.npmjs.com/package/blockstack-profiles)\n[![npm](https://img.shields.io/npm/dm/blockstack-profiles.svg)](https://www.npmjs.com/package/blockstack-profiles)\n[![Slack](http://slack.blockstack.org/badge.svg)](http://slack.blockstack.org/)\n\n### Contents\n\n* [Installation](#installation)\n* [Importing](#importing)\n* [Registration](#registration)\n* [Profiles](#profiles)\n* [Zone Files](#zone-files)\n* [Wiki](#wiki)\n\nA library for working with cryptographically-signed JSON profiles.\n\nThis library can be used to:\n\n1. transform a JSON profile into signed tokens\n1. recover a JSON profile from signed tokens\n1. validate signed profile tokens\n\n*Note: this document uses ES6 in its examples but it is compiled down to Javascript (ES5) and is perfectly compatible with it. If you're using the latter, just make a few adjustments to the examples below (e.g. use \"let\" instead of \"var\").*\n\n### Installation\n\n```\n$ npm install blockstack-profiles\n```\n\n### Importing\n\n#### ES6\n\n```es6\nimport {\n  signToken, wrapToken, signTokenRecords,\n  verifyTokenRecord, getProfileFromTokens,\n  Profile, Person, Organization, CreativeWork,\n  prepareZoneFileForHostedFile\n} from 'blockstack-profiles'\nimport { PrivateKeychain, PublicKeychain } from 'blockstack-keychain'\n```\n\n#### Node\n\n```es6\nvar blockstackProfiles = require('blockstack-profiles')\nvar blockstackKeychain = require('blockstack-keychain')\n```\n\n### Registration\n\nFollow these steps to create and register a profile for a Blockchain ID:\n\n1. Create a JSON profile object\n2. Split up the profile into tokens, sign the tokens, and put them in a token file\n3. Create a zone file that points to the web location of the profile token file\n\n### Profiles\n\n#### Create a profile\n\n```es6\nlet balloonDog = {\n  \"@context\": \"http://schema.org/\",\n  \"@type\": \"CreativeWork\",\n  \"name\": \"Balloon Dog\",\n  \"creator\": [\n    {\n      \"@type\": \"Person\",\n      \"@id\": \"therealjeffkoons.id\",\n      \"name\": \"Jeff Koons\"\n    }\n  ],\n  \"dateCreated\": \"1994-05-09T00:00:00-0400\",\n  \"datePublished\": \"2015-12-10T14:44:26-0500\"\n}\n```\n\n#### Sign a profile as a single token\n\n```es6\nlet privateKeychain = new PrivateKeychain(),\n    privateKey = privateKeychain.privateKey('hex'),\n    publicKey = privateKeychain.publicKeychain.publicKey('hex')\nlet token = signToken(balloonDog, privateKey, {publicKey: publicKey})\nlet tokenRecord = wrapToken(token)\nconsole.log(token)\neyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NksifQ.eyJjbGFpbSI6eyJAY29udGV4dCI6Imh0dHA6Ly9zY2hlbWEub3JnLyIsIkB0eXBlIjoiQ3JlYXRpdmVXb3JrIiwibmFtZSI6IkJhbGxvb24gRG9nIiwiY3JlYXRvciI6W3siQHR5cGUiOiJQZXJzb24iLCJAaWQiOiJ0aGVyZWFsamVmZmtvb25zLmlkIiwibmFtZSI6IkplZmYgS29vbnMifV0sImRhdGVDcmVhdGVkIjoiMTk5NC0wNS0wOVQwMDowMDowMC0wNDAwIiwiZGF0ZVB1Ymxpc2hlZCI6IjIwMTUtMTItMTBUMTQ6NDQ6MjYtMDUwMCJ9LCJzdWJqZWN0Ijp7InB1YmxpY0tleSI6IjAzMTc1MTFlOWVhY2Y0MmZlOGY3MTdmNzU3ODc2YzU1YmQ1ZDRjODgxOGViYWMxNzdiMzUwZmEyZDMzMzAwMTA2NiJ9LCJpc3N1ZXIiOnsicHVibGljS2V5IjoiMDMxNzUxMWU5ZWFjZjQyZmU4ZjcxN2Y3NTc4NzZjNTViZDVkNGM4ODE4ZWJhYzE3N2IzNTBmYTJkMzMzMDAxMDY2In0sImlzc3VlZEF0IjoiMjAxNi0wNC0xOFQyMzo0NTo1Mi40MTFaIiwiZXhwaXJlc0F0IjoiMjAxNy0wNC0xOFQyMzo0NTo1Mi40MTFaIn0.4M-XodG4PaNm1NovKKo3gZVUMwG6aN7W9sVESqdZ4I9UaTB30jEuvqKWyD4aPcckw6SEEbZ1cBwgW9qXNXipzg\nconsole.log(tokenRecord)\n{\n  \"token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NksifQ.eyJjbGFpbSI6eyJAY29udGV4dCI6Imh0dHA6Ly9zY2hlbWEub3JnLyIsIkB0eXBlIjoiQ3JlYXRpdmVXb3JrIiwibmFtZSI6IkJhbGxvb24gRG9nIiwiY3JlYXRvciI6W3siQHR5cGUiOiJQZXJzb24iLCJAaWQiOiJ0aGVyZWFsamVmZmtvb25zLmlkIiwibmFtZSI6IkplZmYgS29vbnMifV0sImRhdGVDcmVhdGVkIjoiMTk5NC0wNS0wOVQwMDowMDowMC0wNDAwIiwiZGF0ZVB1Ymxpc2hlZCI6IjIwMTUtMTItMTBUMTQ6NDQ6MjYtMDUwMCJ9LCJzdWJqZWN0Ijp7InB1YmxpY0tleSI6IjAzMTc1MTFlOWVhY2Y0MmZlOGY3MTdmNzU3ODc2YzU1YmQ1ZDRjODgxOGViYWMxNzdiMzUwZmEyZDMzMzAwMTA2NiJ9LCJpc3N1ZXIiOnsicHVibGljS2V5IjoiMDMxNzUxMWU5ZWFjZjQyZmU4ZjcxN2Y3NTc4NzZjNTViZDVkNGM4ODE4ZWJhYzE3N2IzNTBmYTJkMzMzMDAxMDY2In0sImlzc3VlZEF0IjoiMjAxNi0wNC0xOFQyMzo0NTo1Mi40MTFaIiwiZXhwaXJlc0F0IjoiMjAxNy0wNC0xOFQyMzo0NTo1Mi40MTFaIn0.4M-XodG4PaNm1NovKKo3gZVUMwG6aN7W9sVESqdZ4I9UaTB30jEuvqKWyD4aPcckw6SEEbZ1cBwgW9qXNXipzg\",\n  \"data\": {\n    \"header\": {\n      \"typ\": \"JWT\",\n      \"alg\": \"ES256K\"\n    },\n    \"payload\": {\n      \"claim\": {\n        \"@context\": \"http://schema.org/\",\n        \"@type\": \"CreativeWork\",\n        \"name\": \"Balloon Dog\",\n        \"creator\": [\n          {\n            \"@type\": \"Person\",\n            \"@id\": \"therealjeffkoons.id\",\n            \"name\": \"Jeff Koons\"\n          }\n        ],\n        \"dateCreated\": \"1994-05-09T00:00:00-0400\",\n        \"datePublished\": \"2015-12-10T14:44:26-0500\"\n      },\n      \"subject\": {\n        \"publicKey\": \"0317511e9eacf42fe8f717f757876c55bd5d4c8818ebac177b350fa2d333001066\"\n      },\n      \"issuer\": {\n        \"publicKey\": \"0317511e9eacf42fe8f717f757876c55bd5d4c8818ebac177b350fa2d333001066\"\n      },\n      \"issuedAt\": \"2016-04-18T23:45:52.411Z\",\n      \"expiresAt\": \"2017-04-18T23:45:52.411Z\"\n    },\n    \"signature\": \"4M-XodG4PaNm1NovKKo3gZVUMwG6aN7W9sVESqdZ4I9UaTB30jEuvqKWyD4aPcckw6SEEbZ1cBwgW9qXNXipzg\"\n  },\n  \"encrypted\": false,\n  \"parentPublicKey\": \"02b511f1267a77f5814b2c07f03f1f112438d4be6f553dd4b877b2832874b4e706\",\n  \"derivationEntropy\": \"1f8eaa7a916f05218cfc6904a3dab1a1ccd3ab69fbdd9d96a24db8c7445d118c\"\n}\n```\n\n#### Verify an individual token\n\n```js\ntry {\n  let decodedToken = verifyTokenRecord(tokenRecords[0], publicKeychain)\n} catch(e) {\n  console.log(e)\n}\n```\n\n#### Transform a profile to multiple signed tokens\n\n```es6\nlet privateKeychain = new PrivateKeychain()\nlet tokenRecords = signTokenRecords([balloonDog], privateKeychain)\nconsole.log(tokenRecords)\n[\n  {\n    \"token\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NksifQ.eyJjbGFpbSI6eyJAY29udGV4dCI6Imh0dHA6Ly9zY2hlbWEub3JnLyIsIkB0eXBlIjoiQ3JlYXRpdmVXb3JrIiwibmFtZSI6IkJhbGxvb24gRG9nIiwiY3JlYXRvciI6W3siQHR5cGUiOiJQZXJzb24iLCJAaWQiOiJ0aGVyZWFsamVmZmtvb25zLmlkIiwibmFtZSI6IkplZmYgS29vbnMifV0sImRhdGVDcmVhdGVkIjoiMTk5NC0wNS0wOVQwMDowMDowMC0wNDAwIiwiZGF0ZVB1Ymxpc2hlZCI6IjIwMTUtMTItMTBUMTQ6NDQ6MjYtMDUwMCJ9LCJzdWJqZWN0Ijp7InB1YmxpY0tleSI6IjAzYTU5ZGJmZDk2MTJlNDA4ODgxOGM5MGUxOWFmY2Y4ZDE3OTNiMzhhNWMwNDBjMzhkN2QwN2JiN2QzOWQ4NmQ3MiJ9LCJpc3N1ZWRBdCI6IjIwMTYtMDMtMTBUMTc6MDE6MzIuODc5WiIsImV4cGlyZXNBdCI6IjIwMTctMDMtMTBUMTc6MDE6MzIuODc5WiJ9.vEUJzl713FApgDNYzbUue5SDOdeElxEaAnMbmT-A6ihfrnzhOd5WvzlGJwTiz1LbeTruhQgbh_XyCJ6aLxfu6A\",\n    \"data\": {\n      \"header\": {\n        \"typ\": \"JWT\",\n        \"alg\": \"ES256K\"\n      },\n      \"payload\": {\n        \"claim\": {\n          \"@context\": \"http://schema.org/\",\n          \"@type\": \"CreativeWork\",\n          \"name\": \"Balloon Dog\",\n          \"creator\": [\n            {\n              \"@type\": \"Person\",\n              \"@id\": \"therealjeffkoons.id\",\n              \"name\": \"Jeff Koons\"\n            }\n          ],\n          \"dateCreated\": \"1994-05-09T00:00:00-0400\",\n          \"datePublished\": \"2015-12-10T14:44:26-0500\"\n        },\n        \"subject\": {\n          \"publicKey\": \"03a59dbfd9612e4088818c90e19afcf8d1793b38a5c040c38d7d07bb7d39d86d72\"\n        },\n        \"issuedAt\": \"2016-03-10T17:01:32.879Z\",\n        \"expiresAt\": \"2017-03-10T17:01:32.879Z\"\n      },\n      \"signature\": \"vEUJzl713FApgDNYzbUue5SDOdeElxEaAnMbmT-A6ihfrnzhOd5WvzlGJwTiz1LbeTruhQgbh_XyCJ6aLxfu6A\"\n    },\n    \"publicKey\": \"03a59dbfd9612e4088818c90e19afcf8d1793b38a5c040c38d7d07bb7d39d86d72\",\n    \"encrypted\": false,\n    \"parentPublicKey\": \"03be573c8dbdd74bbc457f530c4f5898f7147f105af57c1aee20127f981697b884\",\n    \"derivationEntropy\": \"35d0d4e73780d7e47b404a961c9005f415db76ae88c1bcd4bdcd742d68670f26\"\n  }\n]\n```\n\n#### Recover a profile from tokens\n\n```js\nlet publicKeychain = privateKeychain.publicKeychain()\nlet recoveredProfile = getProfileFromTokens(tokenRecords, publicKeychain)\nconsole.log(recoveredProfile)\n{ '@context': 'http://schema.org/',\n  '@type': 'CreativeWork',\n  name: 'Balloon Dog',\n  creator: \n   [ { '@type': 'Person',\n       name: 'Jeff Koons',\n       id: 'therealjeffkoons.id' } ],\n  dateCreated: '1994-05-09T00:00:00-0400',\n  datePublished: '2015-12-10T14:44:26-0500' }\n```\n\n#### Validate profile schema\n\n```js\n> var validationResults = Person.validateSchema(recoveredProfile)\n> console.log(validationResults.valid)\ntrue\n```\n\n### Wiki\n\n#### Names\n\nA blockchain ID = a name + a profile, registered on a blockchain.\n\nLet's say you register the name 'alice' within the 'id' namespace, the default namespace for identities for people. In this case, your \"fully qualified name\" name would be expressed as `alice.id`.\n\n#### Profiles\n\nProfile schema is taken from schema.org. The schema for a person record can be found at http://schema.org/Person. There are some fields that have yet to be included, like the \"account\", \"key\", \"policy\", \"id\", and \"publicKey\" fields. An updated schema definition will be published to a different location that superclasses the schema.org Person definition and adds these fields.\n\n#### Profile Storage\n\nBlockchain ID profiles are stored in two files: a token file and a zone file:\n\n+ **token file** - contains signed tokens with profile data\n+ **zone file** - describes where to find the token file\n\n#### Lookups\n\nAn identity lookup is performed as follows:\n\n1. lookup the name in blockstore's name records and get back the data hash associated with the name\n2. lookup the data hash in the blockstore DHT and get back the zone file\n3. scan the zone file for \"zone origin\" records and get the URL found in the \"data\" field - the token file URL\n4. issue a request to the token file URL and get back the token file\n5. parse through the token file for tokens and verify that all the tokens have valid signatures and that they can be tied back to the user's name (by using the public keychain)\n6. grab all of the claims in the tokens and merge them into a single JSON object, which is the user's profile",
  "readmeFilename": "README.md",
  "scripts": {
    "compile": "rm -rf lib; babel --presets es2015 src -d lib",
    "prepublish": "npm run compile",
    "test": "npm run compile; node lib/testing/unitTests.js"
  },
  "version": "0.3.5"
}
